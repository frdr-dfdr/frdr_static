!function(t){"use strict";var e={tagClass:function(t){return"label label-info"},focusClass:"focus",itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},itemTitle:function(t){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:["Enter",","],confirmOnPaste:!1,deleteKeys:["Backspace","Delete"],delimiter:",",exporter:" , ",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0,caseSensitive:!0};function n(e,n){this.isInit=!0,this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput w-100"></div>'),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n),this.isInit=!1}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function a(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}n.prototype={constructor:n,add:function(e,n,i){var a=this;if(!(a.options.maxTags&&a.itemsArray.length>=a.options.maxTags)&&(!1===e||e)){if("string"==typeof e&&a.options.trimValue&&(e=t.trim(e)),"object"==typeof e&&!a.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(a.isSelect&&!a.multiple&&a.itemsArray.length>0&&a.remove(a.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var o=a.options.delimiterRegex?a.options.delimiterRegex:a.options.delimiter,l=e.split(o);if(l.length>1){for(var p=0;p<l.length;p++)this.add(l[p].trim(),!0);return void(n||a.pushVal(a.options.triggerChange))}}var u=a.options.itemValue(e),c=a.options.itemText(e),m=a.options.tagClass(e),h=a.options.itemTitle(e),f=t.grep(a.itemsArray,(function(t){return a.options.caseSensitive?a.options.itemValue(t)===u:a.options.itemValue(t).toLowerCase()===u.toLowerCase()}))[0];if(!f||a.options.allowDuplicates){if(!(a.items().toString().length+e.length+1>a.options.maxInputLength)){var d=t.Event("beforeItemAdd",{item:e,cancel:!1,options:i});if(a.$element.trigger(d),!d.cancel){a.itemsArray.push(e);var g=t('<span class="tag '+r(m)+(null!==h?'" title="'+h:"")+'">'+r(c)+'<span data-role="remove"></span></span>');g.data("item",e),a.findInputWrapper().before(g),g.after(" ");var v=String(u).replace(/[&<>"'\/\\]/g,(function(t){return s[t]})),y=t('option[value="'+encodeURIComponent(u)+'"]',a.$element).length||t('option[value="'+r(v)+'"]',a.$element).length;if(a.isSelect&&!y){var $=t("<option selected>"+r(c)+"</option>");$.data("item",e),$.attr("value",v),a.$element.append($)}n||a.pushVal(a.options.triggerChange),a.options.maxTags!==a.itemsArray.length&&a.items().toString().length!==a.options.maxInputLength||a.$container.addClass("bootstrap-tagsinput-max"),t(".typeahead, .twitter-typeahead",a.$container).length&&a.$input.typeahead("val",""),this.isInit?a.$element.trigger(t.Event("itemAddedOnInit",{item:e,options:i})):a.$element.trigger(t.Event("itemAdded",{item:e,options:i}))}}}else if(a.options.onTagExists){var x=t(".tag",a.$container).filter((function(){return t(this).data("item")===f}));a.options.onTagExists(e,x)}}}},remove:function(e,n,i){var a=this;if(a.objectItems&&(e=(e="object"==typeof e?t.grep(a.itemsArray,(function(t){return a.options.itemValue(t)==a.options.itemValue(e)})):t.grep(a.itemsArray,(function(t){return a.options.itemValue(t)==e})))[e.length-1]),e){var o=t.Event("beforeItemRemove",{item:e,cancel:!1,options:i});if(a.$element.trigger(o),o.cancel)return;t(".tag",a.$container).filter((function(){return t(this).data("item")===e})).remove(),t("option",a.$element).filter((function(){return t(this).data("item")===e})).remove(),-1!==t.inArray(e,a.itemsArray)&&a.itemsArray.splice(t.inArray(e,a.itemsArray),1)}n||a.pushVal(a.options.triggerChange),a.options.maxTags>a.itemsArray.length&&a.$container.removeClass("bootstrap-tagsinput-max"),a.$element.trigger(t.Event("itemRemoved",{item:e,options:i}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(e.options.triggerChange)},refresh:function(){var e=this;t(".tag",e.$container).each((function(){var n=t(this),i=n.data("item"),a=e.options.itemValue(i),o=e.options.itemText(i),s=e.options.tagClass(i);(n.attr("class",null),n.addClass("tag "+r(s)),n.contents().filter((function(){return 3==this.nodeType}))[0].nodeValue=r(o),e.isSelect)&&t("option",e.$element).filter((function(){return t(this).data("item")===i})).attr("value",a)}))},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),(function(t){return e.options.itemValue(t).toString()}));e.$element.val(n.join(e.options.exporter),!0),e.options.triggerChange&&e.$element.trigger("change")},build:function(n){var o=this;if(o.options=t.extend({},e,n),i(o.options,"itemValue"),i(o.options,"itemText"),a(o.options,"tagClass"),o.options.typeahead){var r=o.options.typeahead||{};a(r,"source"),o.$input.typeahead(t.extend({},r,{source:function(e,n){function i(e){e&&(t.isFunction(e.success)?e.success(n):t.isFunction(e.then)?e.then(n):t.when(e).then(n))}t.isFunction(r.source)&&3===r.source.length?r.source(e,i,i):i(r.source(e))},updater:function(t){return o.objectItems?o.add(o.options.itemValue(t)):o.add(o.options.itemText(t)),""}}))}if(o.options.typeaheadjs){var s=[o.options.typeaheadjs],u=[null,s];if(Array.isArray(o.options.typeaheadjs)){var c=o.options.typeaheadjs[0];u=[c,s=Array.isArray(o.options.typeaheadjs[1])?c[1]:[].slice.call(o.options.typeaheadjs,1)]}t.fn.typeahead.apply(o.$input,u).on("typeahead:selected",t.proxy((function(t,e,n){var i=0;s.some((function(t,e){return t.name===n&&(i=e,!0)})),s[i].valueKey?o.add(e[s[i].valueKey]):o.add(e),o.$input.typeahead("val","")}),o))}o.$container.on("click",t.proxy((function(t){o.$element.prop("disabled")||o.$input.prop("disabled",!1),o.$input.trigger("focus")}),o)),o.options.addOnBlur&&o.options.freeInput&&o.$input.on("focusout",t.proxy((function(t){o.add(o.$input.val()),o.$input.val("")}),o)),o.$container.on({focusin:function(){o.$container.addClass(o.options.focusClass)},focusout:function(){o.$container.removeClass(o.options.focusClass);var t=o.findInputWrapper();t.siblings().last().after(t)}}),o.$container.on("keydown input","input",t.proxy((function(e){var n=t(e.target),i=o.findInputWrapper();if(o.$element.prop("disabled"))o.$input.prop("disabled",!0);else{switch(e.key){case"Backspace":if(o.options.deleteKeys&&p(e,o.options.deleteKeys)>-1&&0===l(n[0])){var a=i.prev();a.length&&o.remove(a.data("item"))}break;case"Delete":if(o.options.deleteKeys&&p(e,o.options.deleteKeys)>-1&&0===l(n[0])){var r=i.next();r.length&&o.remove(r.data("item"))}break;case"ArrowLeft":var s=i.prev();0===n.val().length&&s[0]&&(s.before(i),n.trigger("focus"));break;case"ArrowRight":var u=i.next();0===n.val().length&&u[0]&&(u.after(i),n.trigger("focus"));break;case"Home":var c=i.siblings().first();0===n.val().length&&c[0]&&(c.before(i),n.trigger("focus"));break;case"End":var m=i.siblings().last();0===n.val().length&&m[0]&&(m.after(i),n.trigger("focus"))}var h=n.val().length;Math.ceil(h/5);n.attr("size",Math.max(this.inputSize,n.val().length))}}),o)),o.$container.on("keyup input","input",t.proxy((function(e){var n=t(e.target);if(o.$element.prop("disabled"))o.$input.prop("disabled",!0);else{var i=n.val(),a=o.options.maxChars&&i.length>=o.options.maxChars;o.options.freeInput&&(p(e,o.options.confirmKeys)||o.options.confirmOnPaste&&"input"===e.originalEvent.type||a)&&(0!==i.length&&(o.add(a?i.substr(0,o.options.maxChars):i),n.val(""),e.preventDefault()),!1!==o.options.cancelConfirmKeysOnEmpty&&e.preventDefault());var r=n.val().length;Math.ceil(r/5);n.attr("size",Math.max(this.inputSize,n.val().length))}}),o)),o.$container.on("click","[data-role=remove]",t.proxy((function(e){o.$element.prop("disabled")||o.remove(t(e.target).closest(".tag").data("item"))}),o)),o.options.itemValue===e.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):t("option",o.$element).each((function(){o.add(t(this).attr("value"),!0)})))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.trigger("focus")},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(e,i,a){var o=[];return this.each((function(){var r=t(this).data("tagsinput");if(r)if(e||i){if(void 0!==r[e]){if(3===r[e].length&&void 0!==a)var s=r[e](i,null,a);else s=r[e](i);void 0!==s&&o.push(s)}}else o.push(r);else r=new n(this,e),t(this).data("tagsinput",r),o.push(r),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())})),"string"==typeof e?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=n;var o=t("<div />");function r(t){return t?o.text(t).html():""}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","\\":"&#x5C"};function l(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}function p(e,n){return-1!==t.inArray(e.key,n)}t((function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()}))}(window.jQuery);